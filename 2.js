(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1003:function(e,t,n){var r={"./af":214,"./af.js":214,"./ar":215,"./ar-dz":216,"./ar-dz.js":216,"./ar-kw":217,"./ar-kw.js":217,"./ar-ly":218,"./ar-ly.js":218,"./ar-ma":219,"./ar-ma.js":219,"./ar-sa":220,"./ar-sa.js":220,"./ar-tn":221,"./ar-tn.js":221,"./ar.js":215,"./az":222,"./az.js":222,"./be":223,"./be.js":223,"./bg":224,"./bg.js":224,"./bm":225,"./bm.js":225,"./bn":226,"./bn.js":226,"./bo":227,"./bo.js":227,"./br":228,"./br.js":228,"./bs":229,"./bs.js":229,"./ca":230,"./ca.js":230,"./cs":231,"./cs.js":231,"./cv":232,"./cv.js":232,"./cy":233,"./cy.js":233,"./da":234,"./da.js":234,"./de":235,"./de-at":236,"./de-at.js":236,"./de-ch":237,"./de-ch.js":237,"./de.js":235,"./dv":238,"./dv.js":238,"./el":239,"./el.js":239,"./en-au":240,"./en-au.js":240,"./en-ca":241,"./en-ca.js":241,"./en-gb":242,"./en-gb.js":242,"./en-ie":243,"./en-ie.js":243,"./en-il":244,"./en-il.js":244,"./en-nz":245,"./en-nz.js":245,"./eo":246,"./eo.js":246,"./es":247,"./es-do":248,"./es-do.js":248,"./es-us":249,"./es-us.js":249,"./es.js":247,"./et":250,"./et.js":250,"./eu":251,"./eu.js":251,"./fa":252,"./fa.js":252,"./fi":253,"./fi.js":253,"./fo":254,"./fo.js":254,"./fr":255,"./fr-ca":256,"./fr-ca.js":256,"./fr-ch":257,"./fr-ch.js":257,"./fr.js":255,"./fy":258,"./fy.js":258,"./gd":259,"./gd.js":259,"./gl":260,"./gl.js":260,"./gom-latn":261,"./gom-latn.js":261,"./gu":262,"./gu.js":262,"./he":263,"./he.js":263,"./hi":264,"./hi.js":264,"./hr":265,"./hr.js":265,"./hu":266,"./hu.js":266,"./hy-am":267,"./hy-am.js":267,"./id":268,"./id.js":268,"./is":269,"./is.js":269,"./it":270,"./it.js":270,"./ja":271,"./ja.js":271,"./jv":272,"./jv.js":272,"./ka":273,"./ka.js":273,"./kk":274,"./kk.js":274,"./km":275,"./km.js":275,"./kn":276,"./kn.js":276,"./ko":277,"./ko.js":277,"./ky":278,"./ky.js":278,"./lb":279,"./lb.js":279,"./lo":280,"./lo.js":280,"./lt":281,"./lt.js":281,"./lv":282,"./lv.js":282,"./me":283,"./me.js":283,"./mi":284,"./mi.js":284,"./mk":285,"./mk.js":285,"./ml":286,"./ml.js":286,"./mn":287,"./mn.js":287,"./mr":288,"./mr.js":288,"./ms":289,"./ms-my":290,"./ms-my.js":290,"./ms.js":289,"./mt":291,"./mt.js":291,"./my":292,"./my.js":292,"./nb":293,"./nb.js":293,"./ne":294,"./ne.js":294,"./nl":295,"./nl-be":296,"./nl-be.js":296,"./nl.js":295,"./nn":297,"./nn.js":297,"./pa-in":298,"./pa-in.js":298,"./pl":299,"./pl.js":299,"./pt":300,"./pt-br":301,"./pt-br.js":301,"./pt.js":300,"./ro":302,"./ro.js":302,"./ru":303,"./ru.js":303,"./sd":304,"./sd.js":304,"./se":305,"./se.js":305,"./si":306,"./si.js":306,"./sk":307,"./sk.js":307,"./sl":308,"./sl.js":308,"./sq":309,"./sq.js":309,"./sr":310,"./sr-cyrl":311,"./sr-cyrl.js":311,"./sr.js":310,"./ss":312,"./ss.js":312,"./sv":313,"./sv.js":313,"./sw":314,"./sw.js":314,"./ta":315,"./ta.js":315,"./te":316,"./te.js":316,"./tet":317,"./tet.js":317,"./tg":318,"./tg.js":318,"./th":319,"./th.js":319,"./tl-ph":320,"./tl-ph.js":320,"./tlh":321,"./tlh.js":321,"./tr":322,"./tr.js":322,"./tzl":323,"./tzl.js":323,"./tzm":324,"./tzm-latn":325,"./tzm-latn.js":325,"./tzm.js":324,"./ug-cn":326,"./ug-cn.js":326,"./uk":327,"./uk.js":327,"./ur":328,"./ur.js":328,"./uz":329,"./uz-latn":330,"./uz-latn.js":330,"./uz.js":329,"./vi":331,"./vi.js":331,"./x-pseudo":332,"./x-pseudo.js":332,"./yo":333,"./yo.js":333,"./zh-cn":334,"./zh-cn.js":334,"./zh-hk":335,"./zh-hk.js":335,"./zh-tw":336,"./zh-tw.js":336};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=1003},488:function(e,t){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(91),i=n(78),s=n(132),c=n(53),u=n(6),l=n(92),f=n(95),h=n(93),p=n(109),m=n(461),y=(n(1045),m.initializeApp({messagingSenderId:"392966741916"}).messaging()),g=n(195),d=n.n(g);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,s,"next",e)}function s(e){E(a,r,o,i,s,"throw",e)}i(void 0)}))}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=new p.a,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(u,e);var t,n,r,i=P(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).renderItem=function(e){var n=e.item;return o.a.createElement(s.a,{onPress:function(){return t.props.history.push("/chat?me="+I.get("user")+"&other="+n.user)},style:{width:"100%"}},o.a.createElement(h.Layout,{style:{padding:20,flexDirection:"row",width:"100%"}},o.a.createElement(h.Avatar,{size:"large",source:{uri:n.userpic},style:{margin:5}}),o.a.createElement(h.Layout,{style:{margin:5}},o.a.createElement(h.Text,{category:"s1"},n.user),o.a.createElement(h.Text,{category:n.read?"s1":"p1"},n.text?n.text+"  •  "+n.time:"...  •  "+n.time)),n.read?o.a.createElement(h.Icon,{style:{height:30,width:30,marginLeft:100,marginTop:10},fill:"#4DA6FF",name:"alert-circle"}):null))},t.state={data:[],Loading:!0,dark:!1},t.socket=d.a.connect("https://lishup.com:3000",{secure:!0},{transports:["websocket"]}),t.socket.on("connect",(function(e){console.log("connect")})),t}return t=u,(n=[{key:"componentDidMount",value:function(){localStorage.getItem("user")?I.set("user",localStorage.getItem("user"),{path:"/"}):this.props.history.push("/login"),this.fetchmsg(I.get("user")),"yes"==localStorage.getItem("darktheme")?this.setState({dark:!0}):this.setState({dark:!1}),y.requestPermission().then(k(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getToken();case 2:t=e.sent,this.socket.emit("device",{user:localStorage.getItem("user"),token:t});case 4:case"end":return e.stop()}}),e,this)})))).catch((function(e){console.log("Unable to get permission to notify.",e)})),navigator.serviceWorker.addEventListener("message",(function(e){return console.log(e)}))}},{key:"fetchmsg",value:function(e){var t=this;fetch("https://lishup.com/app/allmsg.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){t.setState({data:e,Loading:!1}),t.state.data&&t.allcheck()})).catch((function(e){alert("Error:",e)}))}},{key:"allcheck",value:function(){var e=this;this.eventSource=new EventSource("https://lishup.com/app/checkallmsg.php?id="+this.state.data[0].id+"&read="+this.state.data[0].read+"&me="+I.get("user")),this.eventSource.addEventListener("message",(function(t){"yes"==t.data&&(e.fetchmsg(I.get("user")),e.eventSource.close())}))}},{key:"Divider",value:function(){return o.a.createElement(h.Divider,null)}},{key:"renderHeader",value:function(){return o.a.createElement(h.Layout,{style:T.header},o.a.createElement(a.b,{to:"/profile/"+I.get("user")},o.a.createElement(h.Icon,{name:"person",fill:"#8d8e8f",style:{height:30,width:30,marginVertical:10,marginLeft:"1%"}})),o.a.createElement(h.Text,{style:{fontSize:20,marginVertical:10,textAlign:"center",textAlignVertical:"center",alignSelf:"center"}},"Bubblink - Web"),o.a.createElement(h.Layout,{style:{flexDirection:"row",justifyContent:"space-between"}},o.a.createElement(a.b,{to:"/search"},o.a.createElement(h.Icon,{name:"search",fill:"#8d8e8f",style:{height:30,width:30,marginVertical:10,marginHorizontal:10}})),o.a.createElement(a.b,{to:"/settings"},o.a.createElement(h.Icon,{name:"settings",fill:"#8d8e8f",style:{height:30,width:30,marginVertical:10,marginHorizontal:10}})),o.a.createElement(a.b,{to:"/logout"},o.a.createElement(h.Icon,{name:"log-out",fill:"#8d8e8f",style:{height:30,width:30,marginVertical:10,marginHorizontal:10}}))))}},{key:"render",value:function(){if(this.state.Loading)return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.IconRegistry,{icons:f.EvaIconsPack}),o.a.createElement(h.ApplicationProvider,w({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height,justifyContent:"center",alignItems:"center"}},o.a.createElement(h.Spinner,{size:"giant",style:{alignSelf:"center"}}))));if(this.state.data)var e=v(new Map(this.state.data.map((function(e){return[e.user,e]}))).values());else e=this.state.data;return o.a.createElement(h.ApplicationProvider,w({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height}},o.a.createElement(h.List,{data:e,ItemSeparatorComponent:this.Divider,keyExtractor:function(e,t){return t.toString()},renderItem:this.renderItem,ListHeaderComponent:this.renderHeader,stickyHeaderIndices:[0]})))}}])&&S(t.prototype,n),r&&S(t,r),u}(o.a.Component),T=u.a.create({header:{width:c.a.get("window").width,minHeight:50,maxHeight:100,elevation:10,shadowColor:"rgba(0,0,0, .7)",shadowOffset:{height:0,width:0},shadowOpacity:.5,shadowRadius:15,flexDirection:"row",justifyContent:"space-evenly"},icon:{height:25,width:25}}),L=n(988);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=new p.a,J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,r,a=M(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={messages:[],Loading:!0,dark:!1},t.onReceivedMessage=t.onReceivedMessage.bind(W(t)),t.socket=d.a.connect("https://lishup.com:3000",{secure:!0},{transports:["websocket"]}),t.socket.on("connect",(function(e){console.log("connect")})),t.socket.on("messages",t.onReceivedMessage),t.socket.on("istyping",t.typingmsg),t}return t=i,(n=[{key:"componentDidMount",value:function(){localStorage.getItem("user")?N.set("user",localStorage.getItem("user"),{path:"/"}):this.props.history.push("/login"),this.load(),"yes"==localStorage.getItem("darktheme")?this.setState({dark:!0}):this.setState({dark:!1})}},{key:"load",value:function(){var e=this,t=new URLSearchParams(this.props.location.search).get("me"),n=new URLSearchParams(this.props.location.search).get("other");t==localStorage.getItem("user")?fetch("https://lishup.com/app/getmsgweb.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:n,current:t})}).then((function(e){return e.json()})).then((function(t){t?(e.setState({messages:t,Loading:!1}),e.check()):e.setState({Loading:!1})})):alert("Invalid Request")}},{key:"check",value:function(){var e=this,t=new URLSearchParams(this.props.location.search).get("me"),n=new URLSearchParams(this.props.location.search).get("other");this.msgeventSource=new EventSource("https://lishup.com/app/msg.php?seen="+this.state.messages[0].sent+"&amount="+Object.keys(this.state.messages).length+"&user="+n+"&me="+t),this.msgeventSource.addEventListener("message",(function(t){"false"==t.data&&(e.load(),e.msgeventSource.close())}))}},{key:"onReceivedMessage",value:function(e){var t=new URLSearchParams(this.props.location.search).get("me"),n=new URLSearchParams(this.props.location.search).get("other"),r=[A({},e.messages)];r[0].sender!=t&&r[0].receiver!=t||r[0].receiver!=n&&r[0].receiver!=t||(console.log(r[0]),r[0].receiver==t?r[0].user.id=2:r[0].user.id=1,this.state.messages?this.setState((function(e){return{messages:L.GiftedChat.append(e.messages,r[0])}})):this.setState({messages:r[0]}))}},{key:"onSend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(e),new URLSearchParams(this.props.location.search).get("me");var t=new URLSearchParams(this.props.location.search).get("other");if(0!=Object.keys(this.state.messages).length)var n=parseInt(this.state.messages[0]._id)+1;else n=1;this.socket.emit("messages",{id:n,text:e[0].text,sender:localStorage.getItem("user"),receiver:t}),1==n&&(this.setState({Loading:!0}),this.load())}},{key:"render",value:function(){var e=this;return new URLSearchParams(this.props.location.search).get("me"),new URLSearchParams(this.props.location.search).get("other"),this.state.Loading?o.a.createElement(o.a.Fragment,null,o.a.createElement(h.IconRegistry,{icons:f.EvaIconsPack}),o.a.createElement(h.ApplicationProvider,C({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height,justifyContent:"center",alignItems:"center"}},o.a.createElement(h.Spinner,{size:"giant",style:{alignSelf:"center"}})))):o.a.createElement(h.ApplicationProvider,C({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height}},o.a.createElement(L.GiftedChat,C({},l,{messages:this.state.messages,onSend:function(t){return e.onSend(t)},onPressAvatar:function(t){return e.props.history.push("/profile/"+t.name)},user:{name:N.get("user"),id:1}}))))}}])&&U(t.prototype,n),r&&U(t,r),i}(o.a.Component);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}new p.a;var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(i,e);var t,n,r,a=Q(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).renderItem=function(e){var n=e.item;return o.a.createElement(s.a,{onPress:function(){return t.props.history.push("/profile/"+n.user)},style:{width:"100%"}},o.a.createElement(h.Layout,{style:{padding:20,flexDirection:"row",width:"100%"}},o.a.createElement(h.Avatar,{size:"large",source:{uri:n.photo},style:{margin:5}}),o.a.createElement(h.Layout,{style:{margin:5}},o.a.createElement(h.Text,{category:"s1"},n.fullname),o.a.createElement(h.Text,{category:"s2"},"@"+n.user+" | "+n.phone))))},t.state={text:"",result:[],dark:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){"yes"==localStorage.getItem("darktheme")?this.setState({dark:!0}):this.setState({dark:!1})}},{key:"renderHeader",value:function(){var e=this;return o.a.createElement(h.Layout,{style:ee.header},o.a.createElement(h.Input,{placeholder:"Search People...",style:{width:"95%"},onChangeText:function(t){return e.search(t)}}))}},{key:"Divider",value:function(){return o.a.createElement(h.Divider,null)}},{key:"search",value:function(e){var t=this;this.setState({text:e}),fetch("https://lishup.com/app/searchuser.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({keyword:e,id:"gtlishup"})}).then((function(e){return e.json()})).then((function(e){t.setState({result:e})}))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.IconRegistry,{icons:f.EvaIconsPack}),o.a.createElement(h.ApplicationProvider,G({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height}},o.a.createElement(h.List,{data:this.state.result,ItemSeparatorComponent:this.Divider,keyExtractor:function(e,t){return t.toString()},renderItem:this.renderItem,ListHeaderComponent:function(){return o.a.createElement(h.Layout,{style:ee.header},o.a.createElement(h.Input,{placeholder:"Search People...",style:{width:"95%",marginVertical:10},value:e.state.text,blurOnSubmit:!1,autoFocus:!0,onChangeText:function(t){return e.search(t)}}))},stickyHeaderIndices:[0]}))))}}])&&$(t.prototype,n),r&&$(t,r),i}(o.a.Component),ee=u.a.create({header:{width:c.a.get("window").width,minHeight:50,maxHeight:100,elevation:10,shadowColor:"rgba(0,0,0, .7)",shadowOffset:{height:0,width:0},shadowOpacity:.5,shadowRadius:15,flexDirection:"row",justifyContent:"space-evenly"}}),te=n(52);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=new p.a,le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(i,e);var t,n,r,a=ie(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={userData:[],Loading:!0,dark:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){localStorage.getItem("user")?ue.set("user",localStorage.getItem("user"),{path:"/"}):this.props.history.push("/login");var e=this.props.match.params.username;this.load(e),"yes"==localStorage.getItem("darktheme")?this.setState({dark:!0}):this.setState({dark:!1})}},{key:"load",value:function(e){var t=this;fetch("https://lishup.com/app/user.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:e,current:ue.get("user")})}).then((function(e){return e.json()})).then((function(e){e&&t.setState({userData:e,Loading:!1})}))}},{key:"verified",value:function(e){return"1"==e?o.a.createElement(te.a,{style:he.verified},o.a.createElement(h.Icon,{name:"star",fill:"#6409bf",style:{height:30,width:30},onPress:function(){alert("Verified Badge!","This User has earned this badge for verifying account")}})):null}},{key:"me",value:function(){return this.props.match.params.username==ue.get("user")?o.a.createElement(h.Icon,{onPress:function(){window.open("https://lishup.com/profilesetting.php","_blank").focus()},name:"more-horizontal",fill:this.state.dark?"white":"black",style:{height:40,width:40}}):null}},{key:"checkme",value:function(){var e=this,t=this.props.match.params.username;return t!=ue.get("user")?o.a.createElement(h.Button,{onPress:function(){e.props.history.push("/chat/?me="+ue.get("user")+"&other="+t)}},"Message"):null}},{key:"render",value:function(){var e=this.props.match.params.username;return this.state.Loading?o.a.createElement(o.a.Fragment,null,o.a.createElement(h.IconRegistry,{icons:f.EvaIconsPack}),o.a.createElement(h.ApplicationProvider,re({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height,justifyContent:"center",alignItems:"center"}},o.a.createElement(h.Spinner,{size:"giant",style:{alignSelf:"center"}})))):o.a.createElement(h.ApplicationProvider,re({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height,alignItems:"center",paddingBottom:0}},o.a.createElement(te.a,{style:{backgroundColor:"#5000ca",position:"absolute",bottom:0,width:c.a.get("window").width,height:90}}),this.me(),o.a.createElement(te.a,{style:he.imgContainer},o.a.createElement(h.Avatar,{source:{uri:this.state.userData.pic},size:"giant"})),o.a.createElement(h.Text,{style:he.fullname},this.state.userData.fullName),o.a.createElement(h.Text,{style:he.username},"@",e),o.a.createElement(h.Divider,{style:{marginVertical:10}}),o.a.createElement(h.Text,null,this.state.userData.description),o.a.createElement(h.Text,{style:{fontWeight:"bold"}},this.state.userData.location),this.verified(this.state.userData.verified),o.a.createElement(te.a,{style:{flex:.3,flexDirection:"row",alignSelf:"center",marginTop:15,height:0}},o.a.createElement(te.a,{style:{flex:1,alignItems:"center",marginHorizontal:10}},o.a.createElement(h.Text,{style:he.number},this.state.userData.posts),o.a.createElement(h.Text,{style:{fontWeight:"200"}},"Leash(s)")),o.a.createElement(te.a,{style:{flex:1,alignItems:"center",marginHorizontal:10}},o.a.createElement(h.Text,{style:he.number},this.state.userData.followers),o.a.createElement(h.Text,{style:{fontWeight:"200"}},"Followers")),o.a.createElement(te.a,{style:{flex:1,alignItems:"center",marginHorizontal:10}},o.a.createElement(h.Text,{style:he.number},this.state.userData.follows),o.a.createElement(h.Text,{style:{fontWeight:"200"}},"Following"))),o.a.createElement(te.a,{style:{flex:1,marginTop:0}},this.checkme())))}}])&&oe(t.prototype,n),r&&oe(t,r),i}(o.a.Component),fe=Object(i.f)(le),he=u.a.create({fullname:{fontSize:25,fontWeight:"bold",marginTop:10,textAlign:"center"},username:{fontWeight:"300",marginTop:8,alignSelf:"center"},imgContainer:{borderRadius:50,shadowColor:"#969696",shadowOffset:{width:0,height:3},elevation:10,shadowRadius:5,shadowOpacity:.7,marginTop:15},description:{fontSize:15,color:"#6b6b6b",marginTop:20,fontWeight:"200",textAlign:"center"},verified:{borderRadius:10,backgroundColor:"#f8ebff",padding:10,height:50,marginTop:20},number:{fontSize:25,fontWeight:"bold"}});function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return be(this,n)}}function be(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}new p.a;var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(i,e);var t,n,r,a=de(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={dark:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){"yes"==localStorage.getItem("darktheme")?this.setState({dark:!0}):this.setState({dark:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.IconRegistry,{icons:f.EvaIconsPack}),o.a.createElement(h.ApplicationProvider,me({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height,justifyContent:"center"}},o.a.createElement(h.Layout,{style:{alignSelf:"center",width:"50%",alignItems:"center",padding:20},level:"3"},o.a.createElement(h.Toggle,{status:"success",checked:this.state.dark,onChange:function(t){e.setState({dark:t}),localStorage.setItem("darktheme",t?"yes":"no")}}),o.a.createElement(h.Text,null," Dark Theme "),o.a.createElement(h.Button,{style:{marginVertical:10},status:"primary",onPress:function(){window.open("https://lishup.com/profilesetting.php","_blank").focus()}},"Account Settings"),o.a.createElement(h.Button,{style:{marginVertical:10},status:"danger"},"Log Out")))))}}])&&ye(t.prototype,n),r&&ye(t,r),i}(o.a.Component);u.a.create({header:{width:c.a.get("window").width,minHeight:50,maxHeight:100,elevation:10,shadowColor:"rgba(0,0,0, .7)",shadowOffset:{height:0,width:0},shadowOpacity:.5,shadowRadius:15,flexDirection:"row",justifyContent:"space-evenly"}});function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var o=xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pe(this,n)}}function Pe(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,e);var t,n,r,a=Oe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={username:"",pass:""},t}return t=i,(n=[{key:"componentDidMount",value:function(){"yes"==localStorage.getItem("darktheme")?this.setState({dark:!0}):this.setState({dark:!1})}},{key:"renderHeader",value:function(){var e=this;return o.a.createElement(h.Layout,{style:styles.header},o.a.createElement(h.Input,{placeholder:"Search People...",style:{width:"95%"},onChangeText:function(t){return e.search(t)}}))}},{key:"Divider",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return o.a.createElement(Divider,null)}))},{key:"submit",value:function(){var e=this;fetch("https://lishup.com/app/login.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:this.state.username,password:this.state.pass})}).then((function(e){return e.json()})).then((function(t){"match"==t.msg?"yes"==t.multiple?alert("We found multiple accounts with this credential. Please use Username to Login"):(localStorage.setItem("user",t.user),e.props.history.push("")):alert(t.msg)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.IconRegistry,{icons:f.EvaIconsPack}),o.a.createElement(h.ApplicationProvider,Ee({},l,{theme:this.state.dark?l.dark:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height,justifyContent:"center",padding:10}},o.a.createElement(h.Layout,{level:"4",style:{width:500,maxWidth:"90%",minHeight:"50%",alignSelf:"center",padding:20,justifyContent:"center"}},o.a.createElement(h.Text,{category:"h5",style:{textAlign:"center",marginVertical:20}},"Login - Bubblink"),o.a.createElement(h.Input,{style:{marginVertical:20},onChangeText:function(t){return e.setState({username:t})},placeholder:"Username or Email or Phone No"}),o.a.createElement(h.Input,{style:{marginVertical:20},onChangeText:function(t){return e.setState({pass:t})},placeholder:"Password",secureTextEntry:!0}),o.a.createElement(h.Button,{onPress:function(){return e.submit()}},"Login"),o.a.createElement(h.Button,{style:{marginVertical:10},appearance:"ghost",onPress:function(){window.open("https://lishup.com/register/","_blank").focus()}},"I don't have an Account")))))}}])&&ke(t.prototype,n),r&&ke(t,r),i}(o.a.Component);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var o=Ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ze(this,n)}}function ze(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(i,e);var t,n,r,a=Ce(i);function i(){return Te(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"logout",value:function(){localStorage.setItem("user",""),this.props.history.push("/login")}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.ApplicationProvider,_e({},l,{theme:l.light}),o.a.createElement(h.Layout,{style:{height:c.a.get("window").height,justifyContent:"center",padding:10}},o.a.createElement(h.Button,{onPress:function(){return e.logout()},status:"danger"},"I am sure to Logout"))))}}])&&Le(t.prototype,n),r&&Le(t,r),i}(o.a.Component);t.default=function(){return o.a.createElement(a.a,null,o.a.createElement(i.c,null,o.a.createElement(i.a,{path:"/login",component:Re}),o.a.createElement(i.a,{path:"/logout",component:He}),o.a.createElement(i.a,{path:"/chat",component:J}),o.a.createElement(i.a,{exact:!0,path:"/",component:_}),o.a.createElement(i.a,{path:"/profile/:username",component:fe}),o.a.createElement(i.a,{path:"/search",component:Z}),o.a.createElement(i.a,{path:"/settings",component:je})))}}}]);